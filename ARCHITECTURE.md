# Архитектура проекта

## Структура папок

```
src/
├── components/           # React компоненты
│   ├── Map.tsx          # Основной компонент карты
│   ├── AreaSelector.tsx # Компонент выделения области
│   ├── CoordinatesModal.tsx # Модальное окно с координатами
│   ├── SavedAreasList.tsx # Список сохраненных областей
│   ├── index.ts         # Экспорт всех компонентов
│   └── *.css            # Стили компонентов
├── hooks/               # Кастомные React хуки
│   ├── useSavedAreas.ts # Хук для работы с сохраненными областями
│   └── index.ts         # Экспорт хуков
├── types/               # TypeScript типы и интерфейсы
│   └── index.ts         # Все типы приложения
├── utils/               # Утилиты и вспомогательные функции
│   └── index.ts         # Утилиты для работы с данными
├── services/            # Сервисы для работы с внешними API
│   └── storageService.ts # Сервис для работы с localStorage
├── constants/           # Константы приложения
│   └── index.ts         # Конфигурация карты и стили
└── app/                 # Основные компоненты приложения
    ├── Leaflet.tsx      # Главный компонент
    └── Leaflet.css      # Основные стили
```

## Модули

### 1. Components (Компоненты)

#### Map.tsx
- Основной компонент карты
- Отвечает за отображение карты и сохраненных областей
- Использует константы для конфигурации

#### AreaSelector.tsx
- Компонент для выделения областей на карте
- Обрабатывает события мыши
- Валидирует размер выделенной области

#### CoordinatesModal.tsx
- Модальное окно с координатами
- Позволяет сохранить область с названием
- Адаптивный дизайн

#### SavedAreasList.tsx
- Список сохраненных областей
- Управление сохраненными областями
- Удаление областей

### 2. Hooks (Хуки)

#### useSavedAreas.ts
- Кастомный хук для управления сохраненными областями
- Автоматическая синхронизация с localStorage
- CRUD операции для областей

### 3. Types (Типы)

#### index.ts
- Все TypeScript интерфейсы
- Типизация props компонентов
- Типы данных приложения

### 4. Utils (Утилиты)

#### index.ts
- Функции форматирования координат
- Генерация случайных цветов и ID
- Валидация размеров областей
- Сериализация/десериализация данных

### 5. Services (Сервисы)

#### storageService.ts
- Класс для работы с localStorage
- Сохранение и загрузка данных
- Обработка ошибок

### 6. Constants (Константы)

#### index.ts
- Конфигурация карты
- Стили для выделения областей
- Ключи для localStorage

## Принципы архитектуры

### 1. Разделение ответственности
- Каждый модуль отвечает за свою область
- Компоненты только отображают данные
- Логика вынесена в хуки и сервисы

### 2. Переиспользование
- Утилиты и константы вынесены в отдельные модули
- Компоненты легко переиспользовать
- Хуки инкапсулируют логику

### 3. Типизация
- Все данные типизированы
- Интерфейсы четко определены
- TypeScript обеспечивает безопасность

### 4. Масштабируемость
- Легко добавлять новые компоненты
- Модульная структура позволяет расширять функционал
- Четкое разделение на слои

## Преимущества архитектуры

1. **Читаемость кода** - четкая структура и разделение
2. **Поддерживаемость** - легко находить и изменять код
3. **Тестируемость** - модули можно тестировать независимо
4. **Переиспользование** - компоненты и утилиты можно использовать в других проектах
5. **Масштабируемость** - легко добавлять новый функционал

## Примеры использования

### Импорт компонентов
```typescript
import { Map, CoordinatesModal, SavedAreasList } from '../components';
```

### Использование хука
```typescript
import { useSavedAreas } from '../hooks';
const { savedAreas, addArea, deleteArea } = useSavedAreas();
```

### Работа с утилитами
```typescript
import { formatCoordinate, generateRandomColor } from '../utils';
```

### Использование констант
```typescript
import { MAP_CONFIG, SELECTION_STYLES } from '../constants';
```
